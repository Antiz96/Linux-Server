---
# tasks file for clean_runners

- name: "Clean GitHub runners env"
  ansible.builtin.shell:
    cmd: rm -rvf /opt/github-runner/*/_diag/* /opt/github-runner/*/_work/*
  register: github_runner_env_clean
  changed_when: true

- name: "GitHub runners env clean output"
  ansible.builtin.debug:
    msg: "{{ github_runner_env_clean.stdout_lines }}"
  when: github_runner_env_clean.stdout_lines | length > 0

# - name: "Clean unused docker resources"
#   ansible.builtin.shell:
#     cmd: docker system prune --volumes -af
#   register: docker_clean
#   changed_when: true

# - name: "Docker clean output"
#   ansible.builtin.debug:
#     msg: "{{ docker_clean.stdout_lines }}"
#   when: docker_clean.stdout_lines | length > 0
